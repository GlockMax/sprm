<CreateReportScreen>:

    MDBoxLayout:
        id: main_widget
        orientation: "vertical"
        padding: [30, 0, 30, 30]

        MDTopAppBar:
            id: toolbar
            title: "Создать отчёт"
            md_bg_color: app.theme_cls.primary_color
            specific_text_color: "black"
            elevation: 2
            left_action_items: [["arrow-left", lambda x: app.back()]]

        MDFloatLayout:
            id: second_layout

            MDBoxLayout:
                id: main_layout
                orientation: "vertical"
                padding: [50, 30, 50, 0]
                spacing: 0

        # ========= ПРЕДМЕТ ======== #
                MDBoxLayout:
                    spacing: 30
                    size_hint_y: None

                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1}

                        MDLabel:
                            id: course_label
                            text: "Предмет:"
                            font_size: "14sp"
                            size_hint_y: None
                            markup: True
                            size_hint_x: 1
                            halign: "right"

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1}

                        MDTextField:
                            id: course
                            mode: "line"
                            font_size: "14sp"
                            size_hint_max_x: 250
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_focus: if self.focus: root.course_menu.open()
                            on_text_validate: root.course_menu.dismiss(); n_class.focus = True

        # ========= КЛАСС ======== #
                MDBoxLayout:
                    spacing: 30
                    size_hint_y: None
                    size_hint_x: None
                    width: self.minimum_width * 4
                    pos_hint: {"center_x": .5}
                    pos: 442, 426

                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "top"
                        pos_hint: {'center_x': .5, 'center_y': 1.25}

                        MDLabel:
                            id: n_class_label
                            text: "Класс:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            markup: True
                            halign: "right"

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1.25}

                        MDTextField:
                            id: n_class
                            hint_text: ""
                            size_hint_max_x: 70
                            font_size: "14sp"
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_focus: if self.focus: root.n_class_menu.open()
                            on_text_validate: root.n_class_menu.dismiss(); letter.focus = True
                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "top"
                        pos_hint: {'center_x': .5, 'center_y': 1.25}

                        MDLabel:
                            id: letter_label
                            text: "Литера:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            markup: True
                            halign: "right"

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1.25}

                        MDTextField:
                            id: letter
                            hint_text: ""
                            size_hint_max_x: 70
                            font_size: "14sp"
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_focus: if self.focus: root.n_class_menu.open()
                            on_text_validate: root.n_class_menu.dismiss(); humans.focus = True

        # ========= КОЛ-ВО ЧЕЛОВЕК ======== #
                MDBoxLayout:
                    spacing: 30
                    size_hint_y: None

                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1.5}

                        MDLabel:
                            id: humans_label
                            text: "Количество человек:"
                            font_size: "14sp"
                            size_hint_y: None
                            markup: True
                            size_hint_x: 1
                            halign: "right"

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': 1.5}

                        MDTextField:
                            id: humans
                            hint_text: ""
                            size_hint_max_x: 70
                            font_size: "14sp"
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_text_validate: root.report_type.open()

        # ========= ТИП ОТЧЁТА ======== #
                MDBoxLayout:
                    spacing: 30
                    size_hint_y: None

                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .9, 'center_y': 1.75}

                        MDLabel:
                            id: report_type_label
                            text: "Тип отчёта:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: 1
                            halign: "right"
                            markup: True

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .9, 'center_y': 1.75}

                        MDDropDownItem:
                            id: report_type
                            font_size: "14sp"
                            padding: [0, 0, 0, 0]
                            text: "Выберете тип отчёта"
                            halign: "left"
                            on_release: root.report_type.open()

        # ========= ПАРАМЕТРЫ ТИПА ОТЧЁТА: ======== #
                MDBoxLayout:
                    #cols: 2
                    orientation: "horizontal"
                    spacing: 0
                    size_hint_x: 0.5
                    pos_hint: {"center_x": 0.5}


        # ========= ДЛЯ КР: ======== #
                    MDGridLayout:
                        id: tests
                        rows: 2
                        spacing: 0
                        disabled: True

            # ========= ДАТА ПРОВЕДЕНИЯ ======== #
                        MDBoxLayout:
                            spacing: 30
                            size_hint_y: None

                            AnchorLayout:
                                anchor_x: "right"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2}

                                MDLabel:
                                    id: date_label
                                    text: "Дата:"
                                    markup: True
                                    font_size: "14sp"
                                    size_hint_y: None
                                    size_hint_x: 1
                                    halign: "right"
                                    markup: True

                            AnchorLayout:
                                anchor_x: "left"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2}

                                MDRectangleFlatButton:
                                    id: date
                                    text: "Выбрать день"
                                    font_size: "14sp"
                                    text_color: app.theme_cls.accent_dark
                                    line_color: app.theme_cls.accent_color
                                    on_release: root.show_date_picker()
            # ========= КОЛ-ВО ЧЕЛОВЕК НА КР ======== #
                        MDBoxLayout:
                            spacing: 30
                            size_hint_y: None

                            AnchorLayout:
                                anchor_x: "right"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2.25}

                                MDLabel:
                                    id: curr_humans_label
                                    text: "Сколько человек было на контрольной работе:"
                                    font_size: "14sp"
                                    size_hint_y: None
                                    size_hint_x: 1
                                    halign: "right"
                                    markup: True

                            AnchorLayout:
                                anchor_x: "left"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2.25}

                                MDTextField:
                                    id: curr_humans
                                    hint_text: ""
                                    size_hint_max_x: 70
                                    font_size: "14sp"
                                    mode: "line"
                                    line_color_focus: app.theme_cls.accent_dark
                                    text_color_focus: app.theme_cls.accent_dark
                                    padding: [0, 0, 0, 0]
                                    on_text_validate: i5.focus = True

        # ========= ДЛЯ ЧЕТВЕРТЕЙ: ======== #
                    MDGridLayout:
                        id: quarters
                        rows: 1
                        padding: [0, 0, 0, 0]
                        spacing: 0
                        disabled: True

            # ========= № ЧЕТВЕРТИ ======== #
                        MDBoxLayout:
                            spacing: 30
                            size_hint_y: None

                            AnchorLayout:
                                anchor_x: "right"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2}

                                MDLabel:
                                    id: n_quarter_label
                                    text: "Четверть:"
                                    font_size: "14sp"
                                    size_hint_y: None
                                    size_hint_x: 1
                                    halign: "right"
                                    markup: True

                            AnchorLayout:
                                anchor_x: "left"
                                anchor_y: "center"
                                pos_hint: {'center_x': .9, 'center_y': 2}

                                MDDropDownItem:
                                    id: n_quarter
                                    padding: [0, 0, 0, 0]
                                    font_size: "14sp"
                                    text: "Выберете четверть"
                                    halign: "left"
                                    on_release: root.n_quarter.open()

        # ========= ОЦЕНКИ: ======== #
                MDBoxLayout:
                    id: e
                    spacing: 30
                    size_hint_y: None
                    size_hint_x: 0.7
                    width: self.minimum_width*4
                    pos_hint: {"center_x": 0.5}

        # ========= ПЯТЁРКИ ======== #
                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDLabel:
                            id: i5_label
                            text: "5:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            halign: "right"
                            markup: True

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDTextField:
                            id: i5
                            hint_text: ""
                            size_hint_max_x: 70
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_text_validate: i4.focus = True

        # ========= ЧЕТВЁРКИ ======== #
                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDLabel:
                            id: i4_label
                            text: "4:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            halign: "right"
                            markup: True

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDTextField:
                            id: i4
                            hint_text: ""
                            size_hint_max_x: 70
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_text_validate: i3.focus = True

        # ========= ТРОЙКИ ======== #
                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDLabel:
                            id: i3_label
                            text: "3:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            halign: "right"
                            markup: True

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDTextField:
                            id: i3
                            hint_text: ""
                            size_hint_max_x: 70
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_text_validate: i2.focus = True

        # ========= ДВОЙКИ ======== #
                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDLabel:
                            id: i2_label
                            text: "2:"
                            font_size: "14sp"
                            size_hint_y: None
                            size_hint_x: None
                            halign: "right"
                            markup: True

                    AnchorLayout:
                        anchor_x: "left"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .7}

                        MDTextField:
                            id: i2
                            hint_text: ""
                            size_hint_max_x: 70
                            mode: "line"
                            line_color_focus: app.theme_cls.accent_dark
                            text_color_focus: app.theme_cls.accent_dark
                            padding: [0, 0, 0, 0]
                            on_text_validate: root.create_report()

        # ========= ННОПКА СОЗДАНИЯ ОТЧЁТА ======== #
                MDBoxLayout:
                    size_hint_y: None

                    AnchorLayout:
                        pos_hint: {'center_x': .5, 'center_y': .5}
                        anchor_x: "center"
                        anchor_y: "top"

                        MDRectangleFlatIconButton:
                            id: create_button
                            icon: "creation"
                            text: "Создать"
                            font_size: "14sp"
                            line_color: app.theme_cls.accent_color
                            text_color: app.theme_cls.accent_dark
                            icon_color: app.theme_cls.accent_dark
                            on_release: root.create_report()
            MDCard:
                id: success
                orientation: "vertical"
                pos_hint: {"center_x": .8, "center_y": .5}
                opacity: 0
                md_bg_color: app.theme_cls.primary_color

                size: "350dp", "450dp"
                size_hint: None, None
                MDBoxLayout
                    spacing: 30
                    pos_hint: {'center_x': .4, 'center_y': .70}
                    padding: [0, 0, 0, 0]

                    AnchorLayout:
                        anchor_x: "right"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .50}

                        MDIcon:
                            icon: "content-save-check-outline"
                            font_size: "48sp"
                            halign: "right"
                            color: app.theme_cls.accent_dark

                    AnchorLayout:
                        anchor_x: "center"
                        anchor_y: "center"
                        pos_hint: {'center_x': .5, 'center_y': .50}

                        MDLabel:
                            text: "Отчёт создан!"
                            font_size: "20sp"
                            bold: True
                            size_hint_y: None
                            halign: "left"

                MDGridLayout:
                    rows: 4
                    spacing: 45
                    pos_hint: {'center_x': .57, 'center_y': .5}

                    MDBoxLayout:
                        rows: 4
                        spacing: 30
                        pos_hint: {'center_x': .5, 'center_y': 1}

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 1}

                            MDLabel:
                                text: "Успеваемость:"
                                font_size: "14sp"
                                bold: True
                                size_hint_y: None
                                halign: "right"

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 1}

                            MDLabel:
                                id: perf
                                text: ""
                                font_size: "14sp"
                                size_hint_y: None
                                halign: "left"

                    MDBoxLayout:
                        spacing: 30
                        pos_hint: {'center_x': .5, 'center_y': 1.5}

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 1.5}

                            MDLabel:
                                text: "Качество:"
                                font_size: "14sp"
                                bold: True
                                size_hint_y: None
                                halign: "right"

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 1.5}

                            MDLabel:
                                id: qual
                                text: ""
                                font_size: "14sp"
                                size_hint_y: None
                                halign: "left"

                    MDBoxLayout:
                        spacing: 30
                        pos_hint: {'center_x': .5, 'center_y': 2}

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 2}

                            MDLabel:
                                text: "Средний балл:"
                                font_size: "14sp"
                                bold: True
                                size_hint_y: None
                                halign: "right"

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 2}

                            MDLabel:
                                id: aver
                                text: ""
                                font_size: "14sp"
                                size_hint_y: None
                                halign: "left"

                    MDBoxLayout:
                        spacing: 30
                        pos_hint: {'center_x': .5, 'center_y': 2.5}

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 2.5}

                            MDLabel:
                                text: "СОК:"
                                font_size: "14sp"
                                bold: True
                                size_hint_y: None
                                halign: "right"

                        AnchorLayout:
                            anchor_x: "center"
                            anchor_y: "center"
                            pos_hint: {'center_x': .5, 'center_y': 2.5}

                            MDLabel:
                                id: sok
                                text: ""
                                font_size: "14sp"
                                size_hint_y: None
                                halign: "left"

                MDBoxLayout:
                    orientation: "vertical"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    AnchorLayout:
                        anchor_x: "center"
                        anchor_y: "bottom"
                        MDRectangleFlatIconButton:
                            id: printer
                            disabled: True
                            icon: "printer"
                            text: "Вывести на печать"
                            font_size: "14sp"
                            line_color: app.theme_cls.accent_color
                            icon_color: app.theme_cls.accent_dark
                            text_color: app.theme_cls.accent_dark
                    AnchorLayout:
                        anchor_x: "center"
                        anchor_y: "center"
                        MDRectangleFlatIconButton:
                            id: file_download
                            disabled: True
                            icon: "file-download"
                            text: "Сохранить в .jpeg"
                            font_size: "14sp"
                            line_color: app.theme_cls.accent_color
                            icon_color: app.theme_cls.accent_dark
                            text_color: app.theme_cls.accent_dark